<UserControl x:Class="StartupDashboard.Views.SetupView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="1080" d:DesignWidth="1920">
    <Grid>
        <Grid.Resources>
            <Storyboard x:Key="EntryAnim">
                <DoubleAnimation Storyboard.TargetName="SetupCard"
                                 Storyboard.TargetProperty="Opacity"
                                 From="0" To="1" Duration="0:0:0.5"/>
                <DoubleAnimation Storyboard.TargetName="SetupScale"
                                 Storyboard.TargetProperty="ScaleX"
                                 From="0.9" To="1" Duration="0:0:0.5">
                    <DoubleAnimation.EasingFunction><BackEase EasingMode="EaseOut" Amplitude="0.3"/></DoubleAnimation.EasingFunction>
                </DoubleAnimation>
                <DoubleAnimation Storyboard.TargetName="SetupScale"
                                 Storyboard.TargetProperty="ScaleY"
                                 From="0.9" To="1" Duration="0:0:0.5">
                    <DoubleAnimation.EasingFunction><BackEase EasingMode="EaseOut" Amplitude="0.3"/></DoubleAnimation.EasingFunction>
                </DoubleAnimation>
            </Storyboard>
        </Grid.Resources>
        <UserControl.Triggers>
            <EventTrigger RoutedEvent="UserControl.Loaded">
                <BeginStoryboard Storyboard="{StaticResource EntryAnim}"/>
            </EventTrigger>
        </UserControl.Triggers>

        <Image x:Name="BackgroundImage" Stretch="UniformToFill"/>
        <Rectangle Fill="Black" Opacity="0.45"/>

        <!-- Ambient glow (teal/cyan) -->
        <Ellipse Width="500" Height="500" HorizontalAlignment="Center" VerticalAlignment="Center">
            <Ellipse.Fill>
                <RadialGradientBrush>
                    <GradientStop Color="#22006666" Offset="0"/>
                    <GradientStop Color="#00000000" Offset="1"/>
                </RadialGradientBrush>
            </Ellipse.Fill>
            <Ellipse.Effect><BlurEffect Radius="50"/></Ellipse.Effect>
        </Ellipse>

        <Border x:Name="SetupCard"
                Width="450"
                Background="#22FFFFFF"
                CornerRadius="24"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Opacity="0"
                RenderTransformOrigin="0.5,0.5">
            <Border.RenderTransform>
                <ScaleTransform x:Name="SetupScale"/>
            </Border.RenderTransform>
            <Border.Effect>
                <DropShadowEffect BlurRadius="40" Opacity="0.5" ShadowDepth="0"/>
            </Border.Effect>

            <StackPanel Margin="45,40">
                <!-- Icon -->
                <Border Width="70" Height="70" CornerRadius="35"
                        HorizontalAlignment="Center" Margin="0,0,0,16">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#66003866" Offset="0"/>
                            <GradientStop Color="#66006666" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <TextBlock Text="ðŸ”" FontSize="32" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>

                <TextBlock Text="Initialize Your Dashboard"
                           Foreground="White"
                           FontSize="24"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,6"/>
                <TextBlock Text="Set a secure password to protect your workspace."
                           Foreground="#99FFFFFF"
                           FontSize="13"
                           TextWrapping="Wrap"
                           TextAlignment="Center"
                           Margin="0,0,0,28"/>

                <!-- New Password -->
                <TextBlock Text="New Password" Foreground="#99FFFFFF" Margin="0,0,0,5" FontSize="12" FontWeight="SemiBold"/>
                <PasswordBox x:Name="PasswordInput"
                             Height="44"
                             Margin="0,0,0,16"
                             VerticalContentAlignment="Center"
                             Padding="14,0"
                             FontSize="14"
                             PasswordChanged="PasswordBox_PasswordChanged"/>

                <!-- Confirm Password -->
                <TextBlock Text="Confirm Password" Foreground="#99FFFFFF" Margin="0,0,0,5" FontSize="12" FontWeight="SemiBold"/>
                <PasswordBox x:Name="ConfirmPasswordInput"
                             Height="44"
                             Margin="0,0,0,12"
                             VerticalContentAlignment="Center"
                             Padding="14,0"
                             FontSize="14"
                             PasswordChanged="ConfirmPasswordBox_PasswordChanged"/>

                <!-- Error message -->
                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#FFFF7070"
                           Visibility="{Binding IsErrorVisible, Converter={StaticResource BooleanToVisibilityConverter}}"
                           HorizontalAlignment="Center"
                           FontSize="13"
                           FontWeight="SemiBold"
                           TextWrapping="Wrap"
                           Margin="0,0,0,12"/>

                <Button Content="âœ“  Complete Setup"
                        Command="{Binding SetPasswordCommand}"
                        Height="44"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Foreground="White"
                        BorderThickness="0"
                        Background="#550096FF"
                        Margin="0,6,0,0">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="8"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <Button Content="Exit"
                        Command="{Binding ExitCommand}"
                        Background="Transparent"
                        Foreground="#66FFFFFF"
                        BorderThickness="0"
                        FontSize="12"
                        Margin="0,16,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
